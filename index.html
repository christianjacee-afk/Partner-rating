<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TiffanyTinx Ratings</title>

<link href="https://fonts.googleapis.com/css2?family=Metal+Mania&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
body {
  background:
    radial-gradient(circle at top, #2a0000 0%, #0a0a0a 45%),
    repeating-radial-gradient(circle at center, rgba(255,0,0,.15) 0 2px, transparent 3px 12px);
  color:#eee;
  font-family:'Cinzel', serif;
  padding:20px;
  min-height:100vh;
}

.container {
  max-width:800px;
  margin:auto;
  background:rgba(20,20,20,.95);
  padding:30px;
  border-radius:30px;
  border:3px solid #ff1a1a;
  box-shadow:
    0 0 35px rgba(255,0,0,.7),
    inset 0 0 25px rgba(255,0,0,.2);
}

h1 {
  font-family:'Metal Mania', cursive;
  text-align:center;
  font-size:4.5em;
  color:#ff2b2b;
  margin-bottom:25px;
  text-shadow:
    0 0 10px #ff0000,
    0 0 25px rgba(255,0,0,.8);
}

label {
  display:block;
  margin-top:18px;
  margin-bottom:6px;
  color:#ffb3b3;
  font-size:.9em;
  letter-spacing:1px;
}

input, select, textarea {
  width:100%;
  padding:12px;
  background:#1e1e1e;
  border:2px solid #ff3b3b;
  color:#fff;
  border-radius:20px;
  box-shadow: inset 0 0 10px rgba(255,0,0,.4);
}

textarea { resize:none; }

#saveBtn {
  margin-top:25px;
  width:100%;
  padding:18px;
  font-size:1.3em;
  font-family:'Metal Mania', cursive;
  background:
    linear-gradient(145deg,#ff0000,#ff5c5c);
  border:none;
  border-radius:999px;
  color:white;
  cursor:pointer;
  box-shadow:
    0 10px #700000,
    0 0 30px rgba(255,0,0,1);
  transition:.2s;
}

#saveBtn:active {
  transform:translateY(8px);
  box-shadow:0 0 #700000, 0 0 40px rgba(255,0,0,1);
}

/* ðŸ”¥ FULLSCREEN FLAME */
.flame-overlay {
  position:fixed;
  inset:0;
  z-index:9999;
  pointer-events:none;
  background:
    radial-gradient(circle at 50% 85%, #fff 0%, #ff0 18%, #ff4500 40%, #8b0000 65%, transparent 100%);
  animation:flameRise 2s ease-out forwards;
}

@keyframes flameRise {
  0% { opacity:0; transform:translateY(100%); }
  20% { opacity:1; }
  100% { opacity:0; transform:translateY(-100%); }
}

/* RATINGS */
.rating {
  background:
    linear-gradient(180deg, #2b2b2b, #1b1b1b);
  margin-top:25px;
  padding:18px;
  border-radius:25px;
  border:2px solid #ff2b2b;
  box-shadow:
    0 0 15px rgba(255,0,0,.4),
    inset 0 0 12px rgba(255,255,255,.05);
}

.stars {
  color:#ffd700;
  font-size:1.2em;
  text-shadow:0 0 8px gold;
}

/* FLOATY CUTE EFFECT */
.rating {
  animation:floaty 6s ease-in-out infinite;
}

@keyframes floaty {
  0%,100% { transform:translateY(0); }
  50% { transform:translateY(-6px); }
}

/* ADMIN */
.secret-toggle {
  position:fixed;
  bottom:20px;
  right:20px;
  width:65px;
  height:65px;
  border-radius:50%;
  background:
    radial-gradient(circle, #ff5c5c, #ff0000);
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.8em;
  cursor:pointer;
  box-shadow:0 0 25px rgba(255,0,0,1);
}

#adminPanel {
  position:fixed;
  bottom:100px;
  right:20px;
  background:#260000;
  padding:18px;
  border-radius:20px;
  border:2px solid #ff3b3b;
  display:none;
  width:240px;
  box-shadow:0 0 25px rgba(255,0,0,.8);
}

button {
  border-radius:999px;
  padding:10px;
  background:#ff0000;
  color:white;
  border:none;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="container">
<h1>TiffanyTinx</h1>

<label>Name</label>
<input id="name" placeholder="Anonymous">

<label>Character</label>
<select id="character">
  <option>Pim</option>
  <option>Charlie</option>
  <option>Glep</option>
  <option>Mr Boss</option>
</select>

<label>Stars</label>
<select id="stars">
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
</select>

<label>PP Energy</label>
<select id="pp">
  <option value="1">1</option><option value="2">2</option><option value="3">3</option>
  <option value="4">4</option><option value="5">5</option><option value="6">6</option>
  <option value="7">7</option><option value="8">8</option><option value="9">9</option>
  <option value="10">10</option>
</select>

<label>Comment</label>
<textarea id="review"></textarea>

<button id="saveBtn"><i class="fas fa-skull"></i> SAVE RATING</button>

<div id="list"></div>
</div>

<div class="secret-toggle" id="adminToggle">
  <i class="fas fa-anchor"></i>
</div>

<div id="adminPanel">
  <label>Admin Password</label>
  <input type="password" id="adminPass">
  <button id="adminLogin">Login</button>
  <p id="adminStatus"></p>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyC7srqV5cigcYZEdGIW5O8jl-LoA5nNECk",
  authDomain: "tiffanytinx-bbf9c.firebaseapp.com",
  databaseURL: "https://tiffanytinx-bbf9c-default-rtdb.firebaseio.com",
  projectId: "tiffanytinx-bbf9c"
});

const db = firebase.database();
const ratingsRef = db.ref("ratings");

const ADMIN_PASSWORD = "ppeanile";
let isAdmin = false;

adminToggle.onclick = () => {
  adminPanel.style.display =
    adminPanel.style.display === "block" ? "none" : "block";
};

adminLogin.onclick = () => {
  if (adminPass.value === ADMIN_PASSWORD) {
    isAdmin = true;
    adminStatus.textContent = "Admin enabled";
    adminStatus.style.color = "#0f0";
    adminPanel.style.display = "none";
    render();
  }
};

function fullFlame() {
  const f = document.createElement("div");
  f.className = "flame-overlay";
  document.body.appendChild(f);
  setTimeout(() => f.remove(), 2000);
}

saveBtn.onclick = () => {
  const starsVal = parseInt(stars.value);
  ratingsRef.push({
    name: name.value || "Anonymous",
    character: character.value,
    stars: starsVal,
    pp: parseInt(pp.value),
    review: review.value,
    timestamp: Date.now()
  });

  if (starsVal === 5) fullFlame();

  name.value = "";
  review.value = "";
};

window.deleteRating = id => {
  if (isAdmin && confirm("Delete this rating?")) {
    ratingsRef.child(id).remove();
  }
};

function render() {
  ratingsRef.limitToLast(25).once("value", snap => {
    list.innerHTML = "";
    snap.forEach(child => {
      const r = child.val();
      const div = document.createElement("div");
      div.className = "rating";
      div.innerHTML = `
        <b>${r.name || "Anonymous"}</b> (${r.character || "Unknown"})<br>
        <span class="stars">${"â˜…".repeat(r.stars || 0)}</span><br>
        PP: ${r.pp ?? "N/A"}<br>
        ${r.review || ""}
        ${isAdmin ? `<br><button onclick="deleteRating('${child.key}')">Delete</button>` : ""}
      `;
      list.prepend(div);
    });
  });
}

ratingsRef.on("value", render);
</script>

</body>
</html>
